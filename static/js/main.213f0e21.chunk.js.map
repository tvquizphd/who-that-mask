{"version":3,"sources":["containers/OutputLine.js","containers/OutputChar.js","containers/Output.js","containers/App.js","index.js","containers/Output.module.css"],"names":["OutputLine","nextProps","nextState","ready","this","props","newReady","clientWidth","id","fullWidth","onLineReady","addChars","remaining","labelWidth","copies","Math","floor","cls","stl","children","style","className","ref","el","checkWidth","Component","OutputChar","makeNewLine","line","minFloor","v0","v1","min","sameFloor","Output","SHAPE","window","innerWidth","innerHeight","state","maxHeight","maxWidth","idealHeight","idealWidth","fontSize","lines","label","bind","updateShape","newState","setState","width","height","getShape","lastChar","length","offset","isSameOffset","char","newChar","newLine","lineState","getNextOffset","concat","newCopies","isWholeLabel","num","Array","keys","reduce","output","lastLine","addCharToLine","getLastLine","newLines","slice","numRange","console","error","map","i","addEventListener","timer","setInterval","maxLines","getMaxLines","addLines","clearInterval","outlineStyle","centerStyle","outline","styles","lineStyle","top","j","grid","App","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.213f0e21.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nclass OutputLine extends Component {\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const {ready} = this.props;\n    const newReady = nextProps.ready;\n    return !(ready && newReady);\n  }\n\n  checkWidth(clientWidth) {\n    const {id, ready, fullWidth} = this.props;\n    if (ready) {\n      return;\n    }\n    const {onLineReady, addChars} = this.props;\n    const remaining = fullWidth - clientWidth;\n    if (remaining > 0) {\n      const {labelWidth, copies} = this.props;\n      const initial = copies < 1 || labelWidth < 1;\n      const final = labelWidth > 1 && remaining < labelWidth;\n      if (initial || final) {\n        addChars(1, clientWidth);\n      }\n      else {\n        addChars(Math.floor(remaining / labelWidth), clientWidth);\n      }\n    }\n    else {\n      onLineReady(id);\n    }\n  }\n\n  render() {\n    const {cls, stl} = this.props;\n    const {children} = this.props;\n    return (\n      <div style={stl} className={cls}\n        ref={(el) => {\n          if (el) {\n            this.checkWidth(el.clientWidth);\n          }\n        }}\n      >\n        {children}\n      </div>\n    );\n  }\n}\nexport default OutputLine;\n","import { Component } from 'react';\n\nclass OutputChar extends Component {\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const oldChar = this.props.children;\n    const newChar = nextProps.children;\n    return oldChar !== newChar;\n  }\n\n  render() {\n    const {children} = this.props;\n    return children;\n  }\n}\nexport default OutputChar;\n","import React, { Component } from 'react';\nimport styles from './Output.module.css';\nimport OutputLine from './OutputLine';\nimport OutputChar from './OutputChar';\n\nconst makeNewLine = (line=[]) => {\n  return {\n    ready: false,\n    line: line,\n    copies: 0\n  }\n}\n\nconst isSameOffset = (v0, v1, label) => {\n  if ('offset' in v0 && 'offset' in v1) {\n    return v0.offset % label.length === v1.offset % label.length;\n  }\n  return false;\n}\n\nconst minFloor = (v0, v1) => {\n  return Math.floor(Math.min(v0, v1));\n}\n\nconst sameFloor = (v0, v1) => {\n  return Math.floor(v0) === Math.floor(v1);\n}\n\nclass Output extends Component {\n  constructor(props) {\n    super(props);\n    const SHAPE = [500, 500];\n    const {innerWidth, innerHeight} = window;\n    this.state = {\n      maxHeight: minFloor(SHAPE[1], innerHeight),\n      maxWidth: minFloor(SHAPE[0], innerWidth),\n      idealHeight: SHAPE[1],\n      idealWidth: SHAPE[0],\n      fontSize: 12,\n      lines: [makeNewLine()],\n      label: 'missingno',\n      labelWidth: 0\n    };\n    this.onLineReady = this.onLineReady.bind(this);\n    this.updateShape = this.updateShape.bind(this);\n    this.addChars = this.addChars.bind(this);\n  }\n\n  updateShape() {\n    const newState = {}\n    const {maxWidth, maxHeight} = this.state;\n    const {innerWidth, innerHeight} = window;\n\n    if (!sameFloor(maxWidth, innerWidth)) {\n      newState.maxWidth = Math.floor(innerWidth);\n    }\n    if (!sameFloor(maxHeight, innerHeight)) {\n      newState.maxHeight = Math.floor(innerHeight);\n    }\n    this.setState(newState);\n  }\n\n  getShape() {\n    const {idealWidth, idealHeight} = this.state;\n    const {maxWidth, maxHeight} = this.state;\n    return {\n      width: minFloor(idealWidth, maxWidth),\n      height: minFloor(idealHeight, maxHeight)\n    }\n  }\n\n  getMaxLines() {\n    const {fontSize} = this.state;\n    const {height} = this.getShape();\n    return Math.floor(height / fontSize);\n  }\n\n  isWholeLabel(line) {\n    const {label} = this.state;\n    const lastChar = line[line.length - 1];\n    return line.length > 1 && isSameOffset(line[0], lastChar, label);\n  }\n\n  newLine(line=[]) {\n    return makeNewLine(line);\n  }\n\n  newChar(offset) {\n    const {label} = this.state;\n    return {\n      char: label[offset % label.length],\n      offset: offset\n    }\n  }\n\n  getNextOffset(line) {\n    const lastIndex = line.length - 1;\n    const lastChar = line[lastIndex] || this.newChar(-1);\n    const offset = lastChar.offset + 1;\n    return offset;\n  }\n\n  getLastLine(lines) {\n    const lastIndex = lines.length - 1;\n    return lines[lastIndex] || this.newLine();\n  }\n\n  addCharToLine(lineState) {\n    const {line, copies} = lineState;\n\n    const offset = this.getNextOffset(line);\n    const newChar = this.newChar(offset);\n    const newLine = line.concat([newChar]);\n\n    const finishedCopy = this.isWholeLabel(newLine);\n    const newCopies = copies + (finishedCopy? 1 : 0);\n\n    return {\n      ...lineState,\n      line: newLine,\n      copies: newCopies\n    };\n  }\n\n  addChars(num, clientWidth) {\n    const {lines} = this.state;\n    const numRange = [...Array(num).keys()];\n    const {lastLine, labelWidth} = numRange.reduce((output) => {\n      const lastLine = this.addCharToLine(output.lastLine);\n      const labelWidth = output.labelWidth || (\n        lastLine.copies === 1 ? clientWidth : null\n      );\n      return {\n        labelWidth,\n        lastLine\n      };\n    }, {\n      labelWidth: this.state.labelWidth,\n      lastLine: this.getLastLine(lines)\n    });\n    const newLines = lines.slice(0,-1).concat([lastLine]);\n    this.setState({\n      lines: newLines,\n      labelWidth\n    })\n  }\n\n  addLines(num=1) {\n    if (num!==1) {\n      console.error('Cannot add multiple lines yet');\n      return;\n    }\n    const numRange = [...Array(num).keys()];\n    const {lines} = numRange.reduce((output) => {\n      // TODO... only works for num=1\n      const lastLine = this.getLastLine(output.lines)\n      const offset = this.getNextOffset(lastLine);\n\n      const newLines = output.lines.concat([\n        this.newLine([\n          this.newChar(offset)\n        ])\n      ]);\n      return {\n        lines: newLines\n      };\n    }, {\n      lines: this.state.lines\n    });\n    this.setState({\n      lines: lines\n    })\n  }\n\n  onLineReady(id) {\n    const {lines} = this.state;\n    if (id < lines.length) {\n      const newLines = lines.map((line, i) => {\n        if (id === i) {\n          return {\n            ...line,\n            ready: true\n          };\n        }\n        return line;\n      });\n      this.setState({\n        lines: newLines\n      });\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.updateShape);\n\n    this.timer = setInterval(() => {\n      const {lines} = this.state;\n      const maxLines = this.getMaxLines();\n      const {ready} = this.getLastLine(lines);\n      if (ready && lines.length < maxLines) {\n        this.addLines(1);\n      }\n    }, 100);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  render() {\n    const {fontSize} = this.state;\n    const {lines, labelWidth} = this.state;\n    const {width, height} = this.getShape();\n\n    const outlineStyle = {\n      fontSize: `${fontSize}px`,\n    };\n    const centerStyle = {\n      'width': `${width}px`,\n      'height': `${height}px`\n    };\n\n    const outline = (\n      <div style={outlineStyle} className={styles.outline}>\n        {lines.map(({line, copies, ready}, i) => {\n          const lineStyle ={\n            top: i * fontSize\n          };\n          return (\n            <OutputLine addChars={this.addChars} onLineReady={this.onLineReady}\n              labelWidth={labelWidth} fullWidth={width}\n              copies={copies} ready={ready}\n              stl={lineStyle} cls={styles.line} key={i} id={i}\n            >\n              {line.map(({char}, j) => {\n                return (\n                  <OutputChar key={j}>\n                    {char}\n                  </OutputChar>\n                );\n              })}\n            </OutputLine>\n          );\n        })}\n      </div>\n    );\n    return (\n      <div className={styles.grid}>\n        <div></div>\n        <div style={centerStyle}>\n          {outline}\n        </div>\n        <div></div>\n      </div>\n    )\n  }\n}\nexport default Output;\n","import Output from './Output.js';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <div>\n        Hello World\n      </div>\n      <Output>\n      </Output>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"outline\":\"Output_outline__30pg-\",\"line\":\"Output_line__3suFW\",\"grid\":\"Output_grid__2lwKT\"};"],"sourceRoot":""}