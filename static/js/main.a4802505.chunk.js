(this["webpackJsonpwho-that-mask"]=this["webpackJsonpwho-that-mask"]||[]).push([[0],{18:function(e,t,n){e.exports={outline:"Output_outline__30pg-",line:"Output_line__3suFW",grid:"Output_grid__2lwKT"}},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),s=n.n(i),u=n(26),c=n(2),h=n(5),o=n(12),d=n(13),l=n(10),f=n(15),p=n(14),v=n(4),b=n.n(v),j=n(9),m=n(16),O=n(25),g=n.n(O),x=n(18),w=n.n(x),k=n(1),y=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.canRender}},{key:"checkWidth",value:function(e){var t=this.props,n=t.id;(0,t.enqueueLineUpdate)(n,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cls,a=t.stl,r=this.props.children;return Object(k.jsxs)("div",{style:a,className:n,ref:function(t){if(t){var n=t.getBoundingClientRect().width;e.checkWidth(n)}},children:[r,Object(k.jsx)("br",{})]})}}]),n}(a.Component),C=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children}},{key:"render",value:function(){var e=this.props.children;return" "===e?Object(k.jsx)(a.Fragment,{children:"\xa0"}):e}}]),n}(a.Component),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{numRenders:0,elWidthDiff:0,elWidth:0,line:e}},R=function(e){return Object(m.a)(Array(e).keys()).map((function(){return L([])}))},S=function(e){return e.line.slice(-1)[0]},M=function(e,t,n){return t&&0!==n&&!e.has(t)?W(e,t,Math.abs(n)):e},W=function(e,t,n){return new Map([].concat(Object(m.a)(e),[[t,n]]))},U=function(e,t,n){return e.map((function(e,a){return a===t?n:e}))},N=function(e,t){return Math.floor(Math.min(e,t))},H=function(e,t){return Math.floor(e)===Math.floor(t)},T=function(e,t){return e[t%e.length]},_=function(e,t){var n=g()(e,t);return Object(j.a)(b.a.mark((function e(){var t,a,r,i=this,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,a=new Array(t),r=0;r<t;r++)a[r]=s[r];return e.next=3,new Promise((function(e){n.apply(i,a).then((function(t){e(t)})).catch((function(){e(null)}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))},z=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(o.a)(this,n),a=t.call(this,e);var r=window,i=r.innerWidth,s=r.innerHeight,u=N(450,i),c=N(950,s),h=R(Math.floor(c/16));return a.state={lines:h,idealHeight:950,idealWidth:450,maxHeight:c,maxWidth:u,fontSize:16,label:"missingno",canRender:!0,widthMap:new Map},a.updateShape=_(a.updateShape,333).bind(Object(l.a)(a)),a.resetLines=_(a.resetLines,333).bind(Object(l.a)(a)),a.enqueueLineUpdate=a.enqueueLineUpdate.bind(Object(l.a)(a)),a.addCharsToLine=a.addCharsToLine.bind(Object(l.a)(a)),a.addCharToLine=a.addCharToLine.bind(Object(l.a)(a)),a.lineQueue=Promise.resolve(!0),a}return Object(d.a)(n,[{key:"getShape",value:function(){var e=this.state,t=e.idealWidth,n=e.idealHeight,a=this.state,r=a.maxWidth,i=a.maxHeight;return{width:N(t,r),height:N(n,i)}}},{key:"getMaxLines",value:function(){var e=this.state.fontSize,t=this.getShape().height;return Math.floor(t/e)}},{key:"newLine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return L(e)}},{key:"newChar",value:function(e){var t=e.offset,n=void 0===t?-1:t,a=e.char;return{offset:n,char:void 0===a?"?":a}}},{key:"getNextOffsetByColumn",value:function(e,t){var n=e.elWidth,a=this.getShape().width,r=this.state,i=r.label,s=r.widthMap,u=Object(m.a)(Array(a).keys()).reduce((function(e,t){var a=e.done,r=e.prior,u=e.sumWidth,c=s.get(T(i,t))||0;return a||u+c>n+c/2?{done:!0,prior:r,sumWidth:u}:{prior:t,done:!1,sumWidth:u+c}}),{prior:-1,sumWidth:0,done:!1}).prior;return Math.max(u+t,0)}},{key:"getNextOffset",value:function(e,t){var n=(S(e)||{offset:-1}).offset;return Math.max(n+t,0)}},{key:"getNextChar",value:function(e,t){var n=this,a=this.state.label,r=this.props,i=r.alignment,s=r.space,u=function(){if("column"===i&&t>0&&(S(e)||{}).char===s)return n.getNextOffsetByColumn(e,t);return n.getNextOffset(e,t)}(),c=T(a,u);return this.newChar({offset:u,char:c})}},{key:"getLastLine",value:function(e){return e.slice(-1)[0]||this.newLine()}},{key:"getRatios",value:function(e,t){var n=this.getMaxLines();return{widthRatio:e/this.getShape().width,heightRatio:(t+.5)/n}}},{key:"checkRatios",value:function(e,t){var n=this.getRatios(e,t),a=n.widthRatio,r=n.heightRatio;return!(a>1||r>1)}},{key:"readMask",value:function(e){var t=e.lineState,n=e.lineIdx,a=t.elWidth;if(!this.checkRatios(a,n))return null;var r=this.getRatios(a,n),i=r.widthRatio,s=r.heightRatio,u=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0]],c=Math.floor(i*u[0].length);if(u[Math.floor(s*u.length)][c]){var h=this.props.space;return this.newChar({offset:this.getNextOffset(t,0),char:h})}return this.getNextChar(t,1)}},{key:"addCharToLine",value:function(e,t){if(e.done)return e;var n=e.lineState,a=e.hiddenChars;if(a.length>0&&n.line.length>0)return Object(h.a)(Object(h.a)({},e),{},{done:!0,lineState:Object(h.a)(Object(h.a)({},n),{},{line:n.line.concat([a.slice(-1)[0]])}),hiddenChars:a.slice(0,-1)});var r=this.readMask(e);if(null===r)return e;var i=r.char,s=e.lineIdx,u=e.iMax,c=n.elWidth,o=this.state.widthMap.get(i)||0,d=c+o;if(!this.checkRatios(d,s))return Object(h.a)(Object(h.a)({},e),{},{done:!0});var l=[t===u,o<1].some((function(e){return e}));return Object(h.a)(Object(h.a)({},e),{},{lineState:Object(h.a)(Object(h.a)({},n),{},{line:n.line.concat([r]),elWidth:l?c:d}),done:l})}},{key:"addCharsToLine",value:function(e,t,n){var a=e.num,r=e.lines,i=e.hiddenChars;if(!this.canLineRender(t))return e;var s=Object(m.a)(Array(a).keys()).reduce(this.addCharToLine,{iMax:a-1,done:!1,lineState:t,lineIdx:n,hiddenChars:i});return Object(h.a)(Object(h.a)({},e),{},{allReady:!1,hiddenChars:s.hiddenChars,lines:U(r,n,s.lineState)})}},{key:"listHiddenChars",value:function(){var e=this,t=this.props.space,n=this.state,a=n.widthMap;return n.label.split("").concat([t]).reduce((function(t,n){return a.has(n)?t:[e.newChar({char:n,offset:-1})].concat(Object(m.a)(t))}),[])}},{key:"onColumnUpdate",value:function(){var e=this;return new Promise((function(t){var n=e.state.lines,a=n.reduce(e.addCharsToLine,{hiddenChars:e.listHiddenChars(),num:e.props.stepSize,allReady:!0,lines:n});return a.allReady?e.setState({canRender:!1},t):e.setState({canRender:!0,lines:a.lines},t)}))}},{key:"updateLine",value:function(e,t){var n=this.getShape().width,a=e.numRenders,r=(S(e)||{offset:0}).offset;return t>n||r<0?Object(h.a)(Object(h.a)({},e),{},{line:e.line.slice(0,-1),elWidthDiff:e.elWidth-t}):Object(h.a)(Object(h.a)({},e),{},{elWidth:t,numRenders:a+1,elWidthDiff:t-e.elWidth})}},{key:"onLineUpdate",value:function(e,t){var n=this;return new Promise((function(a){var r=n.state,i=r.lines,s=r.widthMap;if(e<i.length){var u=(S(i[e])||{}).char,c=n.updateLine(i[e],t),h=c.elWidthDiff;n.setState({widthMap:M(s,u,h),lines:U(i,e,c),canRender:!1},a)}}))}},{key:"enqueueLineUpdate",value:function(e,t){var n=this;this.lineQueue.then(Object(j.a)(b.a.mark((function a(){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.onLineUpdate(e,t);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)}))))}},{key:"canLineRender",value:function(e){if(!e)return!1;var t=e.numRenders,n=e.elWidthDiff;return!(t>=2&&0===n)}},{key:"updateShape",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,n,a,r,i,s,u,c,h,o=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=this.getShape(),a=this.state,r=a.maxWidth,i=a.maxHeight,s=a.fontSize,u=window,c=u.innerWidth,h=u.innerHeight,H(r,c)||(t.maxWidth=Math.floor(c)),H(i,h)||(t.maxHeight=Math.floor(h)),this.setState(t,Object(j.a)(b.a.mark((function e(){var t,a,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.getShape(),a=t.height,r=t.width,n.height!==a||n.width!==r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,o.lineQueue;case 5:i=Math.floor(a/s),o.setState({canRender:!0,lines:R(i)});case 7:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetLines",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.lines,e.next=3,this.lineQueue;case 3:this.setState({canRender:!0,lines:R(t.length)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateShape();case 2:case"end":return e.stop()}}),e)})))),e.next=3,this.onColumnUpdate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lineQueue;case 2:return e.next=4,this.onColumnUpdate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.alignment;return e.alignment!==n?(this.resetLines(),!1):t.canRender}},{key:"render",value:function(){var e=this,t=this.state.fontSize,n=this.state.lines,a=this.getShape(),r=a.width,i=a.height,s={fontSize:"".concat(t,"px")},u={width:"".concat(r,"px"),height:"".concat(i,"px")},c=Object(k.jsx)("div",{style:s,className:w.a.outline,children:n.map((function(n,a){var r={top:a*t};return Object(k.jsx)(y,{enqueueLineUpdate:e.enqueueLineUpdate,canRender:e.canLineRender(n),stl:r,cls:w.a.line,id:a,children:n.line.map((function(e,t){var n=e.char;return Object(k.jsx)(C,{children:n},t)}))},a)}))});return Object(k.jsxs)("div",{className:w.a.grid,children:[Object(k.jsx)("div",{}),Object(k.jsx)("div",{style:u,children:c}),Object(k.jsx)("div",{})]})}}]),n}(a.Component);function D(e){var t=e.alignment;return Object(k.jsx)(z,{space:" ",stepSize:100,alignment:t})}var q=function(){return Object(k.jsx)(u.a,{basename:"/who-that-mask",children:Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)(c.c,{children:[Object(k.jsx)(c.a,{path:"/row",children:D({alignment:"row"})}),Object(k.jsx)(c.a,{path:"/",children:D({alignment:"column"})})]})})})};n(40);s.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(q,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a4802505.chunk.js.map