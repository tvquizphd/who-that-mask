(this["webpackJsonpwho-that-mask"]=this["webpackJsonpwho-that-mask"]||[]).push([[0],{13:function(e,t,n){e.exports={outline:"Output_outline__30pg-",line:"Output_line__3suFW",grid:"Output_grid__2lwKT"}},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n.n(a),r=n(15),u=n.n(r),s=n(17),c=n(3),h=n(6),o=n(7),d=n(5),l=n(9),p=n(8),f=n(1),v=n.n(f),j=n(4),b=n(11),O=n(16),w=n.n(O),g=n(13),x=n.n(g),m=n(0),k=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return e.canRender}},{key:"checkWidth",value:function(e){var t=this.props,n=t.id;(0,t.enqueueLineUpdate)(n,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cls,a=t.stl,i=this.props.children;return Object(m.jsxs)("div",{style:a,className:n,ref:function(t){if(t){var n=t.getBoundingClientRect().width;e.checkWidth(n)}},children:[i,Object(m.jsx)("br",{})]})}}]),n}(a.Component),y=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return this.props.children!==e.children}},{key:"render",value:function(){var e=this.props.children;return" "===e?Object(m.jsx)(a.Fragment,{children:"\xa0"}):e}}]),n}(a.Component),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{elWidthDiff:0,elWidth:0,numRenders:0,line:e}},S=function(e){return Object(b.a)(Array(e).keys()).map((function(){return R([])}))},L=function(e,t){var n=t.line,a=t.elWidthDiff,i=n[n.length-1],r=(i||{}).char;return i&&a>0&&!e.has(r)?M(e,r,a):e},M=function(e,t,n){return new Map([].concat(Object(b.a)(e),[[t,n]]))},C=function(e,t,n){return e.map((function(e,a){return a===t?n:e}))},W=function(e,t){return Math.floor(Math.min(e,t))},U=function(e,t){return Math.floor(e)===Math.floor(t)},z=function(e,t){var n=w()(e,t);return Object(j.a)(v.a.mark((function e(){var t,a,i,r=this,u=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=u.length,a=new Array(t),i=0;i<t;i++)a[i]=u[i];return e.next=3,new Promise((function(e){n.apply(r,a).then((function(t){e(t)})).catch((function(){e(null)}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))},N=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;Object(h.a)(this,n),a=t.call(this,e);var i=window,r=i.innerWidth,u=i.innerHeight,s=W(450,r),c=W(950,u),o=S(Math.floor(c/16));return a.state={lines:o,idealHeight:950,idealWidth:450,maxHeight:c,maxWidth:s,fontSize:16,widthMap:new Map,label:"missingno",canRender:!0},a.updateShape=z(a.updateShape,333).bind(Object(d.a)(a)),a.resetLines=z(a.resetLines,333).bind(Object(d.a)(a)),a.enqueueLineUpdate=a.enqueueLineUpdate.bind(Object(d.a)(a)),a.addCharsToLine=a.addCharsToLine.bind(Object(d.a)(a)),a.addCharToLine=a.addCharToLine.bind(Object(d.a)(a)),a.lineQueue=Promise.resolve(!0),a}return Object(o.a)(n,[{key:"getShape",value:function(){var e=this.state,t=e.idealWidth,n=e.idealHeight,a=this.state,i=a.maxWidth,r=a.maxHeight;return{width:W(t,i),height:W(n,r)}}},{key:"getMaxLines",value:function(){var e=this.state.fontSize,t=this.getShape().height;return Math.floor(t/e)}},{key:"newLine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return R(e)}},{key:"newChar",value:function(e,t){return{offset:e,char:t}}},{key:"getNextOffset",value:function(e,t){return(e[e.length-1]||{offset:-1}).offset+t}},{key:"getNextChar",value:function(e,t){var n=this.state.label,a=this.getNextOffset(e,t),i=n[a%n.length];return this.newChar(a,i)}},{key:"getLastLine",value:function(e){return e[e.length-1]||this.newLine()}},{key:"getRatios",value:function(e,t){var n=this.getMaxLines();return{widthRatio:e/this.getShape().width,heightRatio:(t+.5)/n}}},{key:"checkRatios",value:function(e,t){var n=this.getRatios(e,t),a=n.widthRatio,i=n.heightRatio;return!(a>1||i>1)}},{key:"readMask",value:function(e){var t=e.lineState,n=e.lineIdx,a=t.line,i=t.elWidth;if(!this.checkRatios(i,n))return null;var r=this.getRatios(i,n),u=r.widthRatio,s=r.heightRatio,c=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,0,0,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0],[0,0,0,0,0,0,0,0,0]],h=Math.floor(u*c[0].length);return c[Math.floor(s*c.length)][h]?this.newChar(this.getNextOffset(a,0)," "):this.getNextChar(a,1)}},{key:"addCharToLine",value:function(e,t){if(e.done)return e;var n=this.readMask(e);if(null===n)return e;var a=n.char,i=e.lineIdx,r=e.iMax,u=e.lineState,s=e.widthMap,h=u.elWidth,o=s.get(a)||0,d=h+o,l=[t===r,o<1,!this.checkRatios(d,i)].some((function(e){return e}));return Object(c.a)(Object(c.a)({},e),{},{lineState:Object(c.a)(Object(c.a)({},u),{},{line:u.line.concat([n]),elWidth:l?h:d}),done:l})}},{key:"addCharsToLine",value:function(e,t,n){var a=e.num,i=e.lines,r=e.widthMap;if(!this.canLineRender(n))return e;if(t.elWidthDiff<0)return Object(c.a)(Object(c.a)({},e),{},{allReady:!1});var u=Object(b.a)(Array(a).keys()).reduce(this.addCharToLine,{widthMap:L(r,t),iMax:a-1,done:!1,lineState:t,lineIdx:n});return Object(c.a)(Object(c.a)({},e),{},{allReady:!1,widthMap:u.widthMap,lines:C(i,n,u.lineState)})}},{key:"onColumnUpdate",value:function(){var e=this;return new Promise((function(t){var n=e.state,a=n.lines,i=n.widthMap,r=a.reduce(e.addCharsToLine,{widthMap:new Map(Object(b.a)(i)),num:e.props.stepSize,allReady:!0,lines:a});return r.allReady?e.setState({canRender:!1},t):e.setState({canRender:!0,lines:r.lines,widthMap:r.widthMap},t)}))}},{key:"updateLine",value:function(e,t){var n=this.getShape().width,a=e.numRenders;return t>n?Object(c.a)(Object(c.a)({},e),{},{numRenders:a+1,line:e.line.slice(0,-1),elWidthDiff:e.elWidth-t}):Object(c.a)(Object(c.a)({},e),{},{elWidth:t,numRenders:a+1,elWidthDiff:t-e.elWidth})}},{key:"onLineUpdate",value:function(e,t){var n=this;return new Promise((function(a){var i=n.state.lines;if(e<i.length){var r=n.updateLine(i[e],t);n.setState({lines:C(i,e,r),canRender:!1},a)}}))}},{key:"enqueueLineUpdate",value:function(e,t){var n=this;this.lineQueue.then(Object(j.a)(v.a.mark((function a(){return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.onLineUpdate(e,t);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)}))))}},{key:"canLineRender",value:function(e){var t=this.state.lines[e];if(!t)return!1;var n=t.numRenders,a=t.elWidthDiff;return!(n>=2&&0===a)}},{key:"updateShape",value:function(){var e=Object(j.a)(v.a.mark((function e(){var t,n,a,i,r,u,s,c,h,o=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={},n=this.getShape(),a=this.state,i=a.maxWidth,r=a.maxHeight,u=a.fontSize,s=window,c=s.innerWidth,h=s.innerHeight,U(i,c)||(t.maxWidth=Math.floor(c)),U(r,h)||(t.maxHeight=Math.floor(h)),this.setState(t,Object(j.a)(v.a.mark((function e(){var t,a,i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.getShape(),a=t.height,i=t.width,n.height!==a||n.width!==i){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,o.lineQueue;case 5:r=Math.floor(a/u),o.setState({canRender:!0,lines:S(r)});case 7:case"end":return e.stop()}}),e)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resetLines",value:function(){var e=Object(j.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.lines,e.next=3,this.lineQueue;case 3:this.setState({canRender:!0,lines:S(t.length)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(j.a)(v.a.mark((function e(){var t=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updateShape();case 2:case"end":return e.stop()}}),e)})))),e.next=3,this.onColumnUpdate();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(j.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lineQueue;case 2:return e.next=4,this.onColumnUpdate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.stepSize;return e.stepSize!==n?(this.resetLines(),!1):t.canRender}},{key:"render",value:function(){var e=this,t=this.state.fontSize,n=this.state.lines,a=this.getShape(),i=a.width,r=a.height,u={fontSize:"".concat(t,"px")},s={width:"".concat(i,"px"),height:"".concat(r,"px")},c=Object(m.jsx)("div",{style:u,className:x.a.outline,children:n.map((function(n,a){var i=n.line,r={top:a*t};return Object(m.jsx)(k,{enqueueLineUpdate:e.enqueueLineUpdate,canRender:e.canLineRender(a),stl:r,cls:x.a.line,id:a,children:i.map((function(e,t){var n=e.char;return Object(m.jsx)(y,{children:n},t)}))},a)}))});return Object(m.jsxs)("div",{className:x.a.grid,children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{style:s,children:c}),Object(m.jsx)("div",{})]})}}]),n}(a.Component);var T=function(){var e=Object(a.useState)(100),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)("div",{children:["Speed:",Object(m.jsx)("input",{id:"typeinp",type:"range",min:"1",max:"100",value:n,onChange:function(e){i(parseInt(e.target.value))},step:"1"}),n]}),Object(m.jsx)(N,{stepSize:n})]})};n(25);u.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(T,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.af04651f.chunk.js.map